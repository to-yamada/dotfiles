[[plugins]]
repo = 'Shougo/dein.vim'

[[plugins]]
repo = 'nanotech/jellybeans.vim'
hook_add = '''
  set t_Co=256
  let g:jellybeans_use_term_italics = 0
  let g:jellybeans_use_gui_italics = 0
  let g:jellybeans_overrides = {
  \   'background': { 'guibg': '000000' },
  \   'SpecialKey': { 'guifg': '303030', 'guibg': '000000' },
  \   'NonText':    { 'guifg': '303030', 'guibg': '000000' },
  \ }
  autocmd myinit VimEnter * nested colorscheme jellybeans
  " vimdiffの色設定
  autocmd myinit ColorScheme * highlight DiffAdd    ctermbg=22
  autocmd myinit ColorScheme * highlight DiffDelete ctermbg=52
  autocmd myinit ColorScheme * highlight DiffChange ctermbg=17
  autocmd myinit ColorScheme * highlight DiffText   ctermbg=21
'''

[[plugins]]
repo = 'vim-jp/vimdoc-ja'

[[plugins]]
repo = 'sheerun/vim-polyglot'
hook_add = '''
  let g:polyglot_disabled = []
'''

[[plugins]]
repo = 'Shougo/denite.nvim'
hook_add = '''
  " denite キー
  noremap [denite] <Nop>
  nmap <Space>d [denite]

  " s で split
  call denite#custom#map('normal', "s", '<denite:do_action:split>')

  " v で vsplit
  call denite#custom#map('normal', "v", '<denite:do_action:vsplit>')

  " insert モードで <C-s> で split
  call denite#custom#map('insert', "<C-s>", '<denite:do_action:split>')

  " insert モードで <C-v> で vsplit
  call denite#custom#map('insert', "<C-v>", '<denite:do_action:vsplit>')

  " C-j, C-k で上下移動
  call denite#custom#map('normal', '<C-j>', '<denite:move_to_next_line>')
  call denite#custom#map('normal', '<C-k>', '<denite:move_to_previous_line>')
  call denite#custom#map('insert', '<C-j>', '<denite:move_to_next_line>')
  call denite#custom#map('insert', '<C-k>', '<denite:move_to_previous_line>')

  " [denite]k で単語単位での grep
  nnoremap <silent> [denite]k
  \ :<C-u>Denite grep:::<C-r><C-w>
  \ -no-empty -mode=normal<CR>

  " [denite]r で検索結果を開き直す
  nnoremap <silent> [denite]r :<C-u>Denite -resume
  \ -no-empty -mode=normal<CR>

  " [denite]n で次の検索結果へ
  nnoremap <silent> [denite]n :<C-u>Denite -resume
  \ -cursor-pos=+1 -immediately<CR>

  " [denite]p で前の検索結果へ
  nnoremap <silent> [denite]p :<C-u>Denite -resume
  \ -cursor-pos=-1 -immediately<CR>

  " [denite]f でプロジェクトファイル一覧
  nnoremap <silent> [denite]f :<C-u>DeniteProjectDir file/rec
  \ -no-empty<CR>

  " [denite]s でプロジェクトファイル一覧(default-action: split)
  nnoremap <silent> [denite]s :<C-u>DeniteProjectDir file/rec
  \ -no-empty -default-action=split<CR>

  " [denite]v でプロジェクトファイル一覧(default-action: vsplit)
  nnoremap <silent> [denite]v :<C-u>DeniteProjectDir file/rec
  \ -no-empty -default-action=vsplit<CR>

  " [denite]o で oldfiles 一覧
  nnoremap <silent> [denite]o :<C-u>Denite file/old
  \ -no-empty<CR>

  " [denite]d で dotfiles 編集
  nnoremap <silent> [denite]d :<C-u>call denite#start(
  \ [{'name': 'file_rec', 'args': ['~/dotfiles']}])<CR>

  " ripgrep 使用
  if executable('rg')
    call denite#custom#var('file/rec', 'command',
    \ ['rg', '--files', '--glob', '!.git'])

    call denite#custom#var('grep', 'command',
    \ ['rg', '--vimgrep', '--no-heading', '--word-regexp'])
    call denite#custom#var('grep', 'default_opts', [])
    call denite#custom#var('grep', 'recursive_opts', [])
  endif
'''

[[plugins]]
repo = 'tpope/vim-fugitive'
hook_add = '''
  nnoremap [git]  <Nop>
  nmap <Space>g [git]
  nnoremap <silent> [git]s :Gstatus<CR>
  nnoremap <silent> [git]d :Gvdiff<CR>
  nnoremap <silent> [git]b :Gblame<CR>
  nnoremap <silent> [git]c :Gcommit-v<CR>
'''

[[plugins]]
repo = 'airblade/vim-gitgutter'
hook_add = '''
  set updatetime=100
  nmap [git]g <Plug>GitGutterStageHunk
  nmap [git]u <Plug>GitGutterUndoHunk
'''

[[plugins]]
repo='prabirshrestha/async.vim'

[[plugins]]
repo='prabirshrestha/vim-lsp'
hook_add='''
  if executable('clangd')
    augroup LspCpp
      au!
      autocmd User lsp_setup call lsp#register_server({
      \   'name': 'clangd',
      \   'cmd': {server_info->['clangd']},
      \   'whitelist': ['c', 'cpp'],
      \ })
      autocmd FileType c setlocal omnifunc=lsp#complete
      autocmd FileType cpp setlocal omnifunc=lsp#complete
    augroup END
  endif

  if executable('solargraph')
    augroup LspRuby
      au!
      autocmd User lsp_setup call lsp#register_server({
      \   'name': 'solargraph',
      \   'cmd': {server_info->[&shell, &shellcmdflag, 'solargraph stdio']},
      \   'initialization_options': {"diagnostics": "true"},
      \   'whitelist': ['ruby'],
      \ })
      autocmd FileType ruby setlocal omnifunc=lsp#complete
    augroup END
  endif

  let g:lsp_async_completion = 0
'''

[[plugins]]
repo = 'tpope/vim-rails'

[[plugins]]
repo = 'itchyny/lightline.vim'
hook_add = '''
  let g:lightline = {
  \   'colorscheme': 'jellybeans',
  \   'active': {
  \     'left': [ [ 'mode', 'paste' ],
  \               [ 'gitbranch', 'readonly', 'filename', 'modified', 'anzu' ] ]
  \   },
  \   'inactive': {
  \     'left': [ [ 'mode', 'paste' ],
  \               [ 'gitbranch', 'readonly', 'filename', 'modified' ] ],
  \     'right': [ [ 'lineinfo' ],
  \                [ 'percent' ],
  \                [ 'fileformat', 'fileencoding', 'filetype' ] ]
  \   },
  \   'component_function': {
  \     'gitbranch': 'fugitive#head',
  \     'anzu': 'anzu#search_status'
  \   },
  \ }

  " show statusbar
  set laststatus=2

  " hide --INSERT--
  set noshowmode
'''

[[plugins]]
repo = 'kassio/neoterm'
hook_add = '''
  " :Tnew の場合に挿入モードで開始
  let g:neoterm_autoinsert = 1

  " :T {cmd} 実行時に画面スクロールする
  let g:neoterm_autoscroll = 1

  "let g:neoterm_default_mod = 'vertical'   " 縦分割
  let g:neoterm_default_mod = 'belowright'  " 横分割

  " :Tnew 実行
  nnoremap <silent> <C-e><C-t> :Tnew<CR>

  " :Tnew 実行(縦分割)
  nnoremap <silent> <C-e><C-v> :vertical Tnew<CR>

  " 現在の行を実行
  nnoremap <silent> <C-e><C-e> :TREPLSendLine<CR>

  " ビジュアルモードで選択中の行を実行
  vnoremap <silent> <C-e><C-e> V:TREPLSendSelection<CR>

  " ファイルそのものを実行
  nnoremap <silent> <C-e><C-f> :TREPLSendFile<CR>

  " <Esc> で terminal-mode を抜ける
  tnoremap <Esc> <C-\><C-n>

  " <C-w> で ウィンドウ移動
  tnoremap <C-w><C-w> <C-\><C-n><C-w><C-w>
  tnoremap <C-w><C-j> <C-\><C-n><C-w><C-j>
  tnoremap <C-w><C-k> <C-\><C-n><C-w><C-k>
  tnoremap <C-w><C-h> <C-\><C-n><C-w><C-h>
  tnoremap <C-w><C-l> <C-\><C-n><C-w><C-l>
'''

[[plugins]]
repo = 'osyo-manga/vim-anzu'
hook_add = '''
  nmap n <Plug>(anzu-n)zz
  nmap N <Plug>(anzu-N)zz
  nmap * <Plug>(anzu-star)zz
  nmap # <Plug>(anzu-sharp)zz

  " ウインドウを移動したとき、タブを移動したときに
  " 検索ヒット数の表示を消去する
  autocmd myinit WinLeave,TabLeave * call anzu#clear_search_status()

  " C-l でハイライト、検索ヒット数の表示を消去
  nnoremap <silent> <C-l> 
  \ :<C-u>nohlsearch<CR>
  \ :<C-u>call anzu#clear_search_status()<CR>
  \ <C-l>
'''

[[plugins]]
repo = 'simeji/winresizer'
hook_add = '''
  let g:winresizer_start_key = '<C-e><C-w>'
  let g:winresizer_vert_resize = 1
  let g:winresizer_horiz_resize = 1
'''

[[plugins]]
repo = 'tpope/vim-surround'

